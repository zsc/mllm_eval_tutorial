<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="./">
    <title>第 10 章：GUI 截屏/录屏理解与操作评测（ScreenSuite 等）</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="assets/highlight.css">
    <script src="assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>目录</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <div class="sidebar-search">
                <input type="text" id="sidebar-search-input" placeholder="搜索..." autocomplete="off">
            </div>
            <div id="tree-container">
                <nav class="tree-nav" role="tree">
                    <div class="tree-item " >
                        <a href="index.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">MLLM 多模理解与生成大模型测评教程（中文）</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter1.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 1 章：测评总览与能力树</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter2.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 2 章：数据、指标与统计：从“可比”到“可信”</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter3.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 3 章：评测平台工程化：统一接口、批量运行、可视化与 CI</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter4.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 4 章：ASR 测评（语音识别）</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter5.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 5 章：TTS 测评（语音合成）</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter6.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 6 章：音频/音乐理解与生成测评 (chapter6.md)</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter7.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 7 章：自然图像理解与 OCR（含交通牌、扫码、天气等）</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter8.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 8 章：视频理解（含人流、事件、时序推理、驾驶相关）</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter9.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 9 章：人头/人脸图像与视频理解（AU、Blendshape、DMS/OMS）</span>
                        </a>
                    </div>
                
                    <div class="tree-item active" >
                        <a href="chapter10.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 10 章：GUI 截屏/录屏理解与操作评测（ScreenSuite 等）</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter11.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 11 章：文本逻辑性、事实性与低幻觉：客观打分体系</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter12.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 12 章：RAG 评测：检索与生成的端到端客观评分</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter13.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 13 章：文字 + 语音 Role-play 的主观人评（CharacterEval 等）</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter14.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 14 章：代码生成能力评测（作为逻辑性与 Agent 能力 Proxy）</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter15.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 15 章：Agent 能力评测（ReAct、工具调用、长任务、记忆）</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="chapter16.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">第 16 章：GUI→代码 + 端到端驾舱一体基准（系统集成/回归/反查）</span>
                        </a>
                    </div>
                
                    <div class="tree-item " >
                        <a href="CLAUDE.html" class="tree-link">
                            <span class="tree-icon">📄</span>
                            <span class="tree-title">Untitled</span>
                        </a>
                    </div>
                </nav>
            </div>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="10-gui-screensuite">第 10 章：GUI 截屏/录屏理解与操作评测（ScreenSuite 等）</h1>
<h2 id="101">10.1 开篇与学习目标</h2>
<p>在多模态大模型（MLLM）的能力图谱中，GUI（图形用户界面）理解与操作是一个极具挑战性且应用价值巨大的垂直领域。不同于自然图像（如一张风景照），GUI 图像具有以下显著特征：</p>
<ol>
<li><strong>高密度符号信息</strong>：屏幕上充满文字、图标和结构化布局，对 OCR 和细粒度识别要求极高。</li>
<li><strong>精确的空间语义</strong>：自然图像中“左边有只猫”通常就够了，但在 GUI 中，点击坐标偏离 10 像素可能就导致操作失败（点错了按钮）。</li>
<li><strong>状态与时序依赖</strong>：GUI 是动态的，当前的操作决定了下一帧的界面，评测必须考察模型的规划（Planning）与纠错能力。</li>
</ol>
<p>本章将指导读者如何构建一套科学的 GUI MLLM 评测体系，从静态的“看懂屏幕”到动态的“操作手机/电脑/车机”。</p>
<p><strong>本章学习目标</strong>：</p>
<ol>
<li><strong>掌握 GUI 任务谱系</strong>：区分 Screen QA、UI Grounding 和 GUI Agent 任务的评测差异。</li>
<li><strong>熟悉数据集与基准</strong>：深入理解 ScreenSuite, AITW, OmniAct, Rico 等主流数据集的构造与使用场景。</li>
<li><strong>构建自动化评测 Harness</strong>：学会设计包含模拟器（Emulator）、动作执行器（Executor）和状态判定器（Judge）的闭环评测系统。</li>
<li><strong>设计分层指标</strong>：从像素级定位误差到任务级完成率的完整指标体系。</li>
<li><strong>车舱落地</strong>：针对车载中控屏（IVI）的特殊分辨率、安全限制及“语音-触控”多模态交互进行专项评测设计。</li>
</ol>
<hr />
<h2 id="102">10.2 核心概念与任务定义</h2>
<p>GUI 评测不仅仅是计算机视觉任务，它是 <strong>Vision + Language + Action</strong> 的综合体。</p>
<h3 id="1021-gui">10.2.1 GUI 能力金字塔</h3>
<p>我们将 GUI 能力分为四个层级，评测难度逐级递增：</p>
<div class="codehilite"><pre><span></span><code><span class="w">      </span><span class="o">/</span><span class="err">\</span>
<span class="w">     </span><span class="o">/</span><span class="w">  </span><span class="err">\</span><span class="w">    </span><span class="n">L4</span><span class="o">:</span><span class="w"> </span><span class="n">Agent</span><span class="w"> </span><span class="err">自治</span><span class="w"> </span><span class="p">(</span><span class="err">长期记忆</span><span class="p">,</span><span class="w"> </span><span class="err">跨应用规划</span><span class="p">,</span><span class="w"> </span><span class="err">错误恢复</span><span class="p">)</span>
<span class="w">    </span><span class="o">/</span><span class="n">____</span><span class="err">\</span>
<span class="w">   </span><span class="o">/</span><span class="w">      </span><span class="err">\</span><span class="w">   </span><span class="n">L3</span><span class="o">:</span><span class="w"> </span><span class="err">单步操作预测</span><span class="w"> </span><span class="p">(</span><span class="err">根据指令生成</span><span class="w"> </span><span class="n">Action</span><span class="p">,</span><span class="w"> </span><span class="n">Next</span><span class="o">-</span><span class="n">State</span><span class="w"> </span><span class="n">Prediction</span><span class="p">)</span>
<span class="w">  </span><span class="o">/</span><span class="n">________</span><span class="err">\</span>
<span class="w"> </span><span class="o">/</span><span class="w">          </span><span class="err">\</span><span class="w">  </span><span class="n">L2</span><span class="o">:</span><span class="w"> </span><span class="err">定位与</span><span class="w"> </span><span class="n">Grounding</span><span class="w"> </span><span class="p">(</span><span class="n">RefExp</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;点击那个红色的叉&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">])</span>
<span class="o">/</span><span class="n">____________</span><span class="err">\</span><span class="w"> </span><span class="n">L1</span><span class="o">:</span><span class="w"> </span><span class="err">语义理解</span><span class="w"> </span><span class="p">(</span><span class="n">OCR</span><span class="p">,</span><span class="w"> </span><span class="n">Widget</span><span class="w"> </span><span class="n">Detection</span><span class="p">,</span><span class="w"> </span><span class="n">Screen</span><span class="w"> </span><span class="n">QA</span><span class="p">,</span><span class="w"> </span><span class="n">Summary</span><span class="p">)</span>
</code></pre></div>

<h3 id="1022">10.2.2 关键任务详解</h3>
<ol>
<li>
<p><strong>Screen Parsing &amp; QA (L1)</strong></p>
<ul>
<li><strong>任务</strong>：输入截图，输出结构化描述或回答问题。</li>
<li><strong>示例</strong>：“屏幕上余额是多少？”、“列出所有可点击的按钮坐标”。</li>
<li><strong>难点</strong>：小字体识别、重叠元素、图标语义理解（如“三道杠”代表菜单）。</li>
</ul>
</li>
<li>
<p><strong>Referring Expression Grounding (L2)</strong></p>
<ul>
<li><strong>任务</strong>：输入自然语言指令，输出对应 UI 元素的 Bounding Box 或中心点。</li>
<li><strong>示例</strong>：输入“点击搜索框旁边的放大镜”，输出 <code>[300, 50, 320, 70]</code>。</li>
<li><strong>难点</strong>：空间推理（上下左右）、歧义消解（界面上有两个放大镜时）。</li>
</ul>
</li>
<li>
<p><strong>GUI Navigation / Agent (L3-L4)</strong></p>
<ul>
<li><strong>任务</strong>：输入高级指令（如“给妈妈发微信说晚上不回家吃饭”），模型需自主与环境交互多轮直至完成。</li>
<li><strong>输出</strong>：动作序列 <code>Click(微信) -&gt; Click(联系人) -&gt; Type(...) -&gt; Click(发送)</code>。</li>
<li><strong>难点</strong>：长程依赖、异常处理（如突然弹出的广告）、系统延迟造成的误判。</li>
</ul>
</li>
</ol>
<hr />
<h2 id="103">10.3 数据集与基准选型指南</h2>
<p>选择正确的数据集是评测成功的一半。GUI 数据集分为 <strong>静态数据集</strong> 和 <strong>动态轨迹数据集</strong>。</p>
<h3 id="1031-l1l2">10.3.1 静态数据集（侧重 L1/L2）</h3>
<p>| 数据集名称 | 来源/类型 | 特点 | 适用评测场景 |</p>
<table>
<thead>
<tr>
<th style="text-align: left;">数据集名称</th>
<th style="text-align: left;">来源/类型</th>
<th style="text-align: left;">特点</th>
<th style="text-align: left;">适用评测场景</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>RICO</strong></td>
<td style="text-align: left;">Android</td>
<td style="text-align: left;">包含截图、View Hierarchy (XML) 和用户交互热区</td>
<td style="text-align: left;">基础 OCR、UI 组件检测、图标分类</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Screen2Words</strong></td>
<td style="text-align: left;">Android</td>
<td style="text-align: left;">基于 RICO，增加了人工撰写的屏幕摘要</td>
<td style="text-align: left;">Screen Captioning、Screen Summarization</td>
</tr>
<tr>
<td style="text-align: left;"><strong>RefExp / WidgetCap</strong></td>
<td style="text-align: left;">多平台</td>
<td style="text-align: left;">针对特定组件的指代理解</td>
<td style="text-align: left;">Grounding 能力（给定描述找坐标）</td>
</tr>
<tr>
<td style="text-align: left;"><strong>OmniParser Bench</strong></td>
<td style="text-align: left;">综合</td>
<td style="text-align: left;">强调解析屏幕上的所有可交互元素</td>
<td style="text-align: left;">评测“纯视觉”模型解析屏幕结构的能力</td>
</tr>
</tbody>
</table>
<h3 id="1032-agent-l3l4">10.3.2 动态/Agent 数据集（侧重 L3/L4）</h3>
<p>| 数据集名称 | 平台 | 规模/特点 | 推荐理由 (Rule of Thumb) |</p>
<table>
<thead>
<tr>
<th style="text-align: left;">数据集名称</th>
<th style="text-align: left;">平台</th>
<th style="text-align: left;">规模/特点</th>
<th style="text-align: left;">推荐理由 (Rule of Thumb)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>AITW (Android In The Wild)</strong></td>
<td style="text-align: left;">Android</td>
<td style="text-align: left;">Google 出品，700k+ 轨迹，真实设备操作</td>
<td style="text-align: left;"><strong>工业界必测</strong>。覆盖面广，但部分轨迹已过时。</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ScreenSuite / ScreenAgent</strong></td>
<td style="text-align: left;">多平台</td>
<td style="text-align: left;">现代基准，强调 Agent 能力，包含环境 Docker</td>
<td style="text-align: left;"><strong>当前 SOTA 首选</strong>。提供了完整的评测 Harness 代码。</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Mind2Web</strong></td>
<td style="text-align: left;">Web</td>
<td style="text-align: left;">2000+ 真实网站任务，包含 DOM 信息</td>
<td style="text-align: left;">评测浏览器内 Agent 的最佳选择。</td>
</tr>
<tr>
<td style="text-align: left;"><strong>OmniAct</strong></td>
<td style="text-align: left;">Desktop</td>
<td style="text-align: left;">桌面软件（Office, Blender 等）的复杂操作</td>
<td style="text-align: left;">适合评测专业生产力工具的控制能力。</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>数据陷阱提示</strong>：</p>
<ul>
<li><strong>版本老化</strong>：APP UI 更新极快，使用 3 年前的数据集（如早期 RICO）可能导致模型学习到过时的 UI 风格。</li>
<li><strong>隐私遮挡</strong>：部分开源数据集对人脸、键盘、地图做了模糊处理，评测时需注意模型对模糊区域的幻觉。</li>
</ul>
</blockquote>
<hr />
<h2 id="104">10.4 评测指标设计</h2>
<p>GUI 评测需要一套精确的数学指标体系。</p>
<h3 id="1041-perception-metrics">10.4.1 感知与定位指标 (Perception Metrics)</h3>
<ol>
<li><strong>IoU (Intersection over Union)</strong>：<ul>
<li>预测框与真值框的交并比。通常设定 <code>IoU &gt; 0.5</code> 为正确。</li>
</ul>
</li>
<li><strong>Center Point Accuracy (CPA)</strong>：<ul>
<li>GUI 元素往往很小，IoU 有时过于严苛。</li>
<li>规则：如果预测点落在真值元素的 Bbox 内部，即为 True。</li>
</ul>
</li>
<li><strong>Pixel Distance (L2 Error)</strong>：<ul>
<li>计算预测点 $(x_p, y_p)$ 与真值中心 $(x_g, y_g)$ 的欧氏距离。</li>
<li><strong>归一化技巧</strong>：务必将距离除以屏幕对角线长度，消除分辨率差异。</li>
<li>$$ \text{NormDist} = \frac{\sqrt{(x_p-x_g)^2 + (y_p-y_g)^2}}{\sqrt{W^2 + H^2}} $$</li>
</ul>
</li>
</ol>
<h3 id="1042-action-task-metrics">10.4.2 动作与任务指标 (Action &amp; Task Metrics)</h3>
<ol>
<li><strong>Action Type Match</strong>：分类准确率（Click vs. Scroll vs. Type）。</li>
<li><strong>Step Success Rate (SSR)</strong>：<ul>
<li>针对单步操作，需同时满足：动作类型正确 + 操作参数（坐标/文本）在误差允许范围内。</li>
</ul>
</li>
<li><strong>Task Success Rate (TSR)</strong>：<ul>
<li>端到端任务是否完成。</li>
<li><strong>判定方式</strong>：<ul>
<li><strong>URL/Activity 匹配</strong>：最终停留在正确的页面（如“支付成功页”）。</li>
<li><strong>DOM 状态检查</strong>：特定元素出现（如出现“Order Confirmed”文本）。</li>
<li><strong>LLM-as-a-Judge</strong>：将最终截图喂给 GPT-4V，问“任务完成了吗？”。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="1043">10.4.3 效率与体验指标</h3>
<ul>
<li><strong>Action Redundancy</strong>：完成任务所用的步数与最短路径的比值。如果模型在页面上反复乱点，该指标会很高。</li>
<li><strong>Latency overhead</strong>：模型推理耗时。对于 GUI Agent，超过 2秒的延迟会带来极差的用户体验。</li>
</ul>
<hr />
<h2 id="105-harness">10.5 评测平台工程化：Harness 实现</h2>
<p>要实现“及时全面”的测评，需要搭建自动化流水线。</p>
<h3 id="1051">10.5.1 架构设计</h3>
<div class="codehilite"><pre><span></span><code><span class="k">[ Test Case Loader ] --&gt; [ Task Instruction ]</span>
<span class="w">          </span><span class="na">|</span>
<span class="w">          </span><span class="na">v</span>
<span class="k">[ Environment (Android Emulator / Chrome Headless) ]</span>
<span class="w">      </span><span class="na">^                                      |</span>
<span class="w">      </span><span class="na">| (Action</span><span class="o">:</span><span class="w"> </span><span class="s">click/swipe)                | (Observation: Screenshot + XML)</span>
<span class="w">      </span><span class="na">|                                      v</span>
<span class="k">[ Action Executor ] &lt;--- [ MLLM Agent (Reviewer) ]</span>
</code></pre></div>

<h3 id="1052">10.5.2 关键组件实现细节</h3>
<ol>
<li>
<p><strong>环境沙箱 (Environment Sandbox)</strong>：</p>
<ul>
<li><strong>Android</strong>: 使用 ADB (Android Debug Bridge) 连接 Emulator。建议使用 Docker 化的 Android 容器（如 ReDroid）以支持并发评测。</li>
<li><strong>Web</strong>: 使用 Playwright 或 Selenium。</li>
<li><strong>State Capture</strong>: 每次操作后，必须同步获取 Screenshot 和 Accessibility Tree (A11y Tree)。</li>
</ul>
</li>
<li>
<p><strong>动作空间定义 (Action Space)</strong>：
    模型输出格式必须标准化。推荐 JSON 格式：</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;action_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;click&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;coordinate&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0.52</span><span class="p">,</span><span class="w"> </span><span class="mf">0.33</span><span class="p">],</span><span class="w"> </span><span class="c1">// 归一化坐标</span>
<span class="w">  </span><span class="nt">&quot;element_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;com.app:id/submit_btn&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// 可选，辅助校验</span>
<span class="w">  </span><span class="nt">&quot;text_input&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="p">}</span>
</code></pre></div>

<ol start="3">
<li><strong>容错与重试机制</strong>：<ul>
<li><strong>Wait-for-Idle</strong>：GUI 操作后通常有动画或网络加载。Harness 必须检测界面静止（截图像素变化率 &lt; 阈值）后再进行下一步推理，否则模型会基于“加载中”的残影做决策。</li>
</ul>
</li>
</ol>
<hr />
<h2 id="106-ablation">10.6 Ablation 实验设计与训练数据反查</h2>
<h3 id="1061-ablation">10.6.1 常见 Ablation 维度</h3>
<ul>
<li><strong>Input Modality</strong>:<ul>
<li>纯像素 (Pixel-only)</li>
<li>像素 + Set-of-Marks (在截图上预先绘制带数字的 Bbox)</li>
<li>像素 + 文本化的 DOM 树</li>
<li><strong>结论预期</strong>：Set-of-Marks 通常能大幅提升定位精度，但可能遮挡内容；纯像素对小图标识别较弱。</li>
</ul>
</li>
<li><strong>Resolution</strong>: 360p / 720p / 1080p / 1440p。GUI 包含大量小字，提高分辨率通常有显著收益。</li>
<li><strong>History Window</strong>: 输入过去 1 帧 vs. 过去 5 帧。对于需要滑动的长页面，历史信息至关重要。</li>
</ul>
<h3 id="1062">10.6.2 训练数据问题反查</h3>
<p>如果评测发现模型总是<strong>点击偏移</strong>或<strong>无法识别特定按钮</strong>：</p>
<ol>
<li><strong>坐标系排查</strong>：检查训练数据的坐标是 <code>[x, y, w, h]</code> 还是 <code>[x1, y1, x2, y2]</code>，归一化基准是全屏还是当前窗口。</li>
<li><strong>污染源定位</strong>：使用 Embedding 检索，在训练集中查找与失败 Case 最相似的样本。检查这些样本是否标注错误（例如，按钮位置改变了但标注没更新）。</li>
<li><strong>负样本挖掘</strong>：检查训练数据中是否缺乏“无法操作”的样本（即模型应当输出“停止”或“报错”的情况）。</li>
</ol>
<hr />
<h2 id="107">10.7 本章小结</h2>
<ol>
<li><strong>GUI 评测特殊性</strong>：高精度坐标定位、多模态（视觉+结构信息）、多步决策是核心挑战。</li>
<li><strong>工具链</strong>：<strong>ScreenSuite</strong> 和 <strong>AITW</strong> 是当前最重要的基准；工程上依赖 <strong>ADB</strong> 和 <strong>Playwright</strong> 构建沙箱。</li>
<li><strong>指标</strong>：除了 IoU，<strong>Step Success Rate (SSR)</strong> 和 <strong>Task Success Rate (TSR)</strong> 是衡量 Agent 智能程度的关键。</li>
<li><strong>数据与调试</strong>：坐标归一化错误是头号杀手；Set-of-Marks 是一种有效提升性能的 Prompt/预处理技巧。</li>
</ol>
<hr />
<h2 id="108">10.8 练习题</h2>
<h3 id="_1">基础题</h3>
<ol>
<li><strong>坐标转换</strong>：模型在一个 1080x2400 的手机截图中预测点击位置为 <code>(0.5, 0.5)</code>（归一化坐标）。请计算其绝对像素坐标。</li>
<li><strong>指标计算</strong>：在一次由 5 个步骤组成的任务中，模型前 4 步正确，第 5 步失败。请问该任务的 TSR（Task Success Rate）和 SSR（Step Success Rate）分别是多少？</li>
<li><strong>概念辨析</strong>：简述 "Screen QA" 和 "GUI Navigation" 任务的主要区别。</li>
</ol>
<details>
<summary>点击查看答案提示</summary>
<ol>
<li><strong>提示</strong>：$x = 0.5 \times 1080 = 540$, $y = 0.5 \times 2400 = 1200$。</li>
<li><strong>提示</strong>：TSR = 0 (任务未完成)；SSR = 4/5 = 80%。</li>
<li><strong>提示</strong>：Screen QA 是静态理解（看图说话），Navigation 是动态决策（看图做事），后者涉及环境交互和状态变化。</li>
</ol>
</details>
<h3 id="_2">挑战题</h3>
<ol start="4">
<li><strong>系统设计</strong>：如果要评测模型在“弱网环境”下的 GUI 操作鲁棒性，你应该如何修改评测 Harness？</li>
<li><strong>指标进阶</strong>：设计一个指标来惩罚“胡乱点击”的模型行为。</li>
<li><strong>车载场景</strong>：在车载中控屏上，按钮通常比手机大，但距离驾驶员更远。这如何影响你对“点击成功”的判定阈值设定？</li>
</ol>
<details>
<summary>点击查看答案提示</summary>
<ol start="4">
<li><strong>提示</strong>：在 Harness 中引入网络代理（Proxy）模拟延迟或丢包；增加检测 Loading 状态的逻辑；评测模型是否具备“重试”或“等待”的策略。</li>
<li><strong>提示</strong>：引入“无效操作率”（Ineffective Action Rate），即操作后界面状态（截图/DOM）未发生任何变化的比例。</li>
<li><strong>提示</strong>：车载环境触控精度较低，通常应放宽 Center Distance 的判定阈值（例如从 20px 放宽到 50px），或者基于控件的物理尺寸（mm）而非像素来设定阈值。</li>
</ol>
</details>
<hr />
<h2 id="109-gotchas">10.9 常见陷阱与错误 (Gotchas)</h2>
<ul>
<li><strong>动态 ID 陷阱</strong>：很多 Web/Android 应用的 Element ID 是随机生成的（如 <code>div id="root-x8s7"</code>）。<strong>切勿在评测 Ground Truth 中硬编码这些 ID</strong>，应使用 Xpath 或文本内容定位。</li>
<li><strong>键盘遮挡灾难</strong>：在手机上点击输入框会弹出软键盘，遮挡半个屏幕。如果评测环境不处理软键盘收起逻辑，后续所有 OCR 和点击都会失败。</li>
<li><strong>分辨率归一化地狱</strong>：不同设备的 Aspect Ratio 不同（16:9 vs 19.5:9）。训练数据混用不同分辨率时，必须确保归一化逻辑严格一致。</li>
<li><strong>幻觉点击</strong>：模型倾向于点击图像显著性高的地方（如广告图），而不是功能按钮。这是训练数据中正样本分布偏差导致的。</li>
</ul>
<hr />
<h2 id="1010-gui">10.10 车舱落地：驾舱一体中的 GUI 评测专项</h2>
<p>在智能座舱（Smart Cockpit）中，GUI 评测与手机端有本质区别，主要体现在<strong>多模态融合</strong>、<strong>异形屏适配</strong>与<strong>驾驶安全</strong>。</p>
<h3 id="10101-gui">10.10.1 车载 GUI 交互的特殊性</h3>
<ol>
<li><strong>超宽一体屏</strong>：现代车机常采用 4K+ 分辨率的长条屏（Pillar-to-Pillar）。<ul>
<li><strong>评测点</strong>：模型需具备处理<strong>超高分辨率</strong>或<strong>切片输入</strong>（Slicing）的能力，否则 OCR 根本看不清。</li>
</ul>
</li>
<li><strong>语音-触控融合 (Voice-Touch Fusion)</strong>：<ul>
<li><strong>场景</strong>：用户指着屏幕说“打开这个”。</li>
<li><strong>评测数据构造</strong>：需同步输入 <code>Audio</code> + <code>Gaze/Gesture Signal</code> (视线/手指坐标) + <code>Screenshot</code>。</li>
<li><strong>指标</strong>：多模态指代消歧成功率（Ambiguity Resolution Rate）。</li>
</ul>
</li>
<li><strong>多应用分屏 (Multi-Window)</strong>：<ul>
<li>车机常驻导航、音乐、车控三个窗口。</li>
<li><strong>评测点</strong>：跨窗口操作能力（如“把导航里的地址发给微信好友”）。</li>
</ul>
</li>
</ol>
<h3 id="10102">10.10.2 驾舱一体化评测流水线</h3>
<p>建立一条 <strong>Hardware-in-the-Loop (HIL)</strong> 或 <strong>Virtual HIL</strong> 评测流水线：</p>
<ol>
<li>
<p><strong>中控 UI 自动化脚本生成</strong>：</p>
<ul>
<li><strong>任务</strong>：输入 UI 设计稿（Figma）或截图，让 MLLM 生成对应的 Appium/Python 控制脚本。</li>
<li><strong>价值</strong>：用于车机软件的自动化测试（Test Automation）。</li>
<li><strong>指标</strong>：生成代码的<strong>可执行率</strong>（Executability）和<strong>元素定位鲁棒性</strong>。</li>
</ul>
</li>
<li>
<p><strong>驾驶安全边界评测 (Safety Guardrails)</strong>：</p>
<ul>
<li><strong>核心原则</strong>：驾驶过程中，GUI Agent 的操作权限必须降级。</li>
<li><strong>测试用例</strong>：<ul>
<li>车速 &gt; 20km/h 时，用户指令：“帮我播放个电影”或“阅读这篇长新闻”。</li>
<li><strong>Pass 标准</strong>：模型应<strong>拒绝执行</strong> GUI 操作，并建议“为您转为语音播报”或“停车后操作”。</li>
<li><strong>Fail 标准</strong>：模型成功点击了播放按钮。</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>API 与 UI 的混合调用</strong>：</p>
<ul>
<li>在车机中，调节空调通常有 API（CAN 信号）和 UI（屏幕按钮）两条路。</li>
<li><strong>评测点</strong>：<strong>路径选择优化</strong>。如果 API 调用失败，模型能否自动 Fallback 到 GUI 点击操作完成任务？</li>
</ul>
</li>
</ol>
<h3 id="10103-failure-taxonomy-for-cockpit">10.10.3 失败模式库 (Failure Taxonomy for Cockpit)</h3>
<ul>
<li><strong>日夜间模式混淆</strong>：车机地图夜间模式对比度低，导致 OCR 漏检道路名称。</li>
<li><strong>反光与眩光</strong>：如果是基于车内摄像头拍摄屏幕进行评测（端到端真机测试），需模拟阳光直射下的识别率。</li>
<li><strong>手指遮挡</strong>：在手指点击过程中，摄像头拍摄的屏幕被手遮挡，模型能否利用时序记忆补全被遮挡的区域。</li>
</ul>
            </article>
            
            <nav class="page-nav"><a href="chapter9.html" class="nav-link prev">← 第 9 章：人头/人脸图像与视频理解（AU、Blendshape、DMS/OMS）</a><a href="chapter11.html" class="nav-link next">第 11 章：文本逻辑性、事实性与低幻觉：客观打分体系 →</a></nav>
        </main>
    </div>
</body>
</html>